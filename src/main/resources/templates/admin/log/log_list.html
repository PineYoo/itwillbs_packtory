<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
		xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
		layout:decorate="~{common/layouts/de_layout}">
<head>
<title>로그 리스트</title>
</head>
<body id="page-top">
	<th:block layout:fragment="contents">
		<!-- Begin Page Content -->
		<div class="container-fluid">
			<!-- Page Heading -->
			<h1 class="h3 mb-2 text-gray-800">로그 리스트</h1>
			<!-- 리스트 출력 -->
			<div class="card shadow mb-4">
				<div class="card-body">
					<div class="table-responsive"><!-- 반응형으로 해준다는 말이겠지? -->
						<div class="row">
							<div class="col-sm-12 col-md-3">
								<label>AccessID:
									<input type="search" class="form-control form-control-sm" placeholder="">
								</label>
							</div>
							<div class="col-sm-12 col-md-3">
								<label>Search:
								<input type="search" class="form-control form-control-sm" placeholder="">
								</label>
							</div>
							<div class="col-sm-12 col-md-3">
								<label>Search2:
								<input type="search" class="form-control form-control-sm" placeholder="">
								</label>
							</div>
							<div class="col-sm-12 col-md-3">
								<button type="button" id="newBtn">로그작성(개발테스트용)</button>
							</div>
						</div>
						<div class="row">
						</div>
						<table class="table table-bordered">
							<thead>
								<tr>
									<th>번호</th>
									<th>아이디</th>
									<th>접근타입</th>
									<th>접근장치</th>
									<th>IP</th>
									<th>URL</th>
									<th>접근일자</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="item, status : ${logDTOList}" th:data-id="${item.idx}" class="clickable-row">
									<!-- <th:block th:object="${item}"> -->
									<td th:text="${status.count}"></td>
									<td th:text="${item.accessId}"></td>
									<td th:text="${item.accessType}"></td>
									<td th:text="${item.accessDevice}"></td>
									<td th:text="${item.ip}"></td>
									<td th:text="${item.url}"></td>
									<td th:text="${#temporals.format(item.accessDate, 'yyyy-MM-dd hh:mm:ss')}"></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<script type="text/javascript">
				$(function() {
					$('#newBtn').on("click", function() {
						location.href="/admin/log/new";
					});
					
					$('.clickable-row').on("click", function() {
						const id = $(this).data("id");
						console.log("click id is %s", id);
						location.href=`/admin/log/${id}`;
					});
					
					$('#register_client').off("click").on("click", function() {
						console.log("hello register_client");
						let form_date = $('#registerClientForm').serialize();
						console.log("form_date : " + form_date);
			
						$.ajax({
							url: "/orders/client",
							type: "POST",
							data : form_date,
							success: function(response) {
								if(response === "success") {
									console.log(response);
								} else {
									console.log(response);
								}
							},
							error: function(error) {
								console.error(error);
							}
						});
					});
				});// end of $(function() {
			</script>
		</div>
	</th:block>
</body>
</html>