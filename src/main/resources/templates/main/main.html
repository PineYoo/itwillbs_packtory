<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
		xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
		layout:decorate="~{common/layouts/de_layout}">
<head>
<title>íŒ©í† ë¦¬(PackTory)</title>
	<!-- FullCalendar CSS -->
	<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.17/main.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css" />
	
	<!-- FullCalendar JS -->
	<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.17/index.global.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-element-bundle.min.js"></script>
	<style>
		#calendar {
			max-width: 100%;
			margin: 20px auto;
			min-height: 500px;
		}
		/* ========================== */
		.commute-container {
			display: flex;
			flex-direction: column;
			gap: 10px;
		}

		.commute-row {
			display: flex;
			align-items: center;
			gap: 8px;
			width: 100%;
		}
		
		.commute-row label {
			width: 65px;  /* ê¸€ì ê¸¸ì´ì™€ ìƒê´€ì—†ì´ ê³ ì • */
			flex-shrink: 0;  /* ì¤„ì–´ë“¤ì§€ ì•Šê²Œ ê³ ì • */
			display: inline-block;
		}
		
		.commute-row input {
			flex: 1;  /* ë‚¨ì€ ê³µê°„ ëª¨ë‘ ì‚¬ìš© */
			min-width: 0; /* ì¤„ì–´ë“¤ ìˆ˜ ìˆë„ë¡ */
			border: 1px solid #ccc;
			padding: 3px 8px;
			border-radius: 3px;
			height: 38px;
		}
		
		/* ì¶œí‡´ê·¼ ë²„íŠ¼ full width */
		.checkInOut-btn {
			width: 100%;
		}
		
		/* ì™¸ê·¼/ë³µê·€ ë²„íŠ¼ */
		.work-btn:not(.checkInOut-btn) {	/* ì¶œí‡´ê·¼ ë²„íŠ¼ ì œì™¸ */
			width: calc(50% - 5px);
		}
		
		/* ì¢ì€ í™”ë©´ì¼ ë•Œ ë²„íŠ¼ì´ ì•„ë˜ë¡œ ë‚´ë ¤ì˜¤ê³  ë„ˆë¹„ 100% */
		@media (max-width: 576px) {
			.checkInOut-btn {
				width: 100%;
			}
		}
		
		/* ì™¸ê·¼/ë³µê·€ ë²„íŠ¼ ì¤„ */
		#outsideButtons {
			display: flex;
			flex-wrap: wrap;
			gap: 10px;
		}
		
		#outsideButtons .work-btn {
			height: 38px;
		}
	</style>
</head>
<body id="page-top">
	<th:block layout:fragment="contents">
		<!-- Begin Page Content -->
		<div class="container-fluid">
		
			<!-- Page Heading -->
<!-- 			<div class="d-sm-flex align-items-center justify-content-between mb-4"> -->
<!-- 				<h1 class="h3 mb-4 text-gray-800">ë©”ì¸!</h1> -->
<!-- 			</div> -->

			<!-- Content Row -->
			<div class="row">
				<!-- ---------- ê³µì§€ì‚¬í•­ ì˜ì—­ ---------------- -->
				<div class="col-xl-6 col-md-6 mb-4">
					<div class="card border-left-primary shadow h-100 py-2">
						<div class="card-body">
							<strong class="me-2">ğŸ“¢ ê³µì§€ì‚¬í•­</strong>
							<swiper-container autoplay-delay="3000"
											  autoplay-disable-on-interaction="false"
											  loop="true"
											  speed="600">
<!-- 								<swiper-slide>í…ŒìŠ¤íŠ¸ ê³µì§€ì‚¬í•­</swiper-slide> -->
<!-- 								<swiper-slide>í…ŒìŠ¤íŠ¸í…ŒìŠ¤íŠ¸íŠ¸ì„¸íŠ¸ì„¸íŠ¸í…ŒìŠ¤íŠ¸</swiper-slide> -->
<!-- 								<swiper-slide>ì´ê±´ ì•„ë¬´ë„ ëª»ë³¼ê±°ì•¼</swiper-slide> -->
<!-- 								<swiper-slide>ê·¸ëƒ¥ ì˜ê¹Œ?</swiper-slide> -->
								<swiper-slide th:each="item, status : ${noticeList}"
								              th:if="${status.index < 5}">
								    <a th:href="@{/groupware/notice/{id}(id=${item.idx})}"
								       class="me-4 text-decoration-none text-dark"
								       th:text="${item.title}">
								    </a>
								</swiper-slide>
							</swiper-container>
						</div>
					</div>
				</div>
				<!-- ---------- ê³µì§€ì‚¬í•­ ì˜ì—­ ë ------------- -->
				
				<!-- ---------- ì œì‘ ì²´ê° ì˜ì—­ ---------------- -->
				<div class="col-xl-3 col-md-6 mb-4">
					<div class="card border-left-info shadow h-100 py-2">
						<div class="card-body">
							<div class="row no-gutters align-items-center">
								<div class="col mr-2">
									<div class="text-xs font-weight-bold text-info text-uppercase mb-1">
										Packtory ì œì‘ì²´ê°
									</div>
									<div class="row no-gutters align-items-center">
										<div class="col-auto">
											<div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">30%</div>
										</div>
										<div class="col">
											<div class="progress progress-sm mr-2">
												<div class="progress-bar bg-info" role="progressbar"
													style="width: 30%" aria-valuenow="30" aria-valuemin="0"
													aria-valuemax="100"></div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-auto">
									<i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- ---------- ì œì‘ ì²´ê° ì˜ì—­ ë------------- -->
				
				<!-- ---------- ë¡œê·¸ì¸ ì •ë³´ ì˜ì—­ ---------------- -->
				<div class="col-xl-3 col-md-6 mb-4">
					<div class="card border-left-success shadow h-100 py-2">
						<div class="card-body">
							<div class="row no-gutters align-items-center">
								<div class="col mr-2">
									<div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
										ì…ì‚¬ì¼ : <span th:text="${#authentication.principal.hireDate}"></span>
										</div>
									<div class="h5 mb-0 font-weight-bold text-gray-800">
										<span th:text="${#authentication.principal.positionName}">ì§ì±…</span>
										<span th:text="${#authentication.principal.name}">ì´ë¦„</span>
									</div>
								</div>
								<div class="col-auto">
									<i class="fas fa-comments fa-2x text-gray-300"></i>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- ---------- ë¡œê·¸ì¸ ì •ë³´ ì˜ì—­ ë ------------- -->
			</div><!-- end of 1st row -->

			<!-- Content Row -->
			<div class="row">
				<!-- ---------- ì¼ì • ì˜ì—­ ------------- -->
				<div class="col-lg-9 mb-4">
					<!-- Project Card Example -->
					<div class="card shadow mb-4">
						<div class="card-header py-3">
							<h6 class="m-0 font-weight-bold text-primary">ì¼ì •</h6>
						</div>
						<div class="card-body">
							<!-- fullcalendar -->
							<div class="container mt-4">
								<div id="calendar"></div>
							</div>
						</div>
					</div>
				</div>
				<!-- ---------- ì¼ì • ì˜ì—­ ë ---------- -->
				
				<!-- ---------- ê·¼íƒœ ì˜ì—­ ------------- -->
				<div class="col-lg-3 mb-4">
					<div class="card shadow mb-4">
						<div class="card-header py-3">
							<h6 class="m-0 font-weight-bold text-primary">ê·¼íƒœ</h6>
						</div>
						<div class="card-body">
							<!-- hidden ! -->
							<input type="hidden" id="modelCheckInTime" th:value="${checkInTime}"> 
							<input type="hidden" id="modelCheckOutTime" th:value="${checkOutTime}">
							<input type="hidden" id="modelLastStatus" th:value="${lastCommuteRecord != null ? lastCommuteRecord.workStatusCode : ''}">

							<div class="commute-container">
								<div class="commute-line">
									<div class="commute-row">
										<label for="checkInTime">ì¶œê·¼ì‹œê°„</label>
										<input type="text" id="checkInTime" class="mb-2" disabled>
									</div>
									<div class="commute-row">
										<label for="checkOutTime">í‡´ê·¼ì‹œê°„</label>
										<input type="text" id="checkOutTime" class="mb-2" disabled>
									</div>
								</div>
							
								<!-- ì¶œê·¼/í‡´ê·¼ ë²„íŠ¼ -->
								<div class="checkInOut-buttons">
									<th:block th:each="item : ${codeItemList}">
										<button th:if="${item.minorName == 'ì¶œê·¼' || item.minorName == 'í‡´ê·¼'}"
										        th:id="${item.minorName}"
										        th:text="${item.minorName}"
										        th:data-code="${item.minorCode}"
										        th:data-name="${item.minorName}"
										        class="btn btn-primary work-btn checkInOut-btn"
										        style="display:none;"></button>
									</th:block>
								</div>
							
								<!-- ì™¸ê·¼/ë³µê·€ ë²„íŠ¼ -->
								<div id="outsideButtons" class="mt-2">
									<th:block th:each="item : ${codeItemList}">
										<button th:if="${item.minorName == 'ì™¸ê·¼' || item.minorName == 'ë³µê·€'}"
										        th:id="${item.minorName}"
										        th:text="${item.minorName}"
										        th:data-code="${item.minorCode}"
										        th:data-name="${item.minorName}"
										        class="btn btn-secondary work-btn"
										        style="display:none;"></button>
									</th:block>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- ---------- ê·¼íƒœ ì˜ì—­ ë ---------- -->
			</div> <!-- end of 2nd row -->

			<hr>
<!--/* 			<span>ì„¸ì…˜ ë””ë²„ê¹…</span>
			<span th:text="${loginVO}"></span> -->
		</div> <!-- /.container-fluid */-->
		
		<script type="text/javascript">
			document.addEventListener('DOMContentLoaded', function() {
				var calendarEl = document.getElementById('calendar');
				var calendar = new FullCalendar.Calendar(calendarEl, {
					initialView : 'dayGridMonth',
					locale : 'ko',
					headerToolbar : {
						left : 'prev,next today',
						center : 'title',
						right : 'dayGridMonth,timeGridWeek'
					},
					events : [
					// ë‚˜ì¤‘ì— ì„œë²„ì—ì„œ JSON ë°›ì•„ì„œ ë™ì ìœ¼ë¡œ ì²˜ë¦¬ ê°€ëŠ¥
					{
						title : 'í”„ë¡œì íŠ¸ 1ì°¨ ë§ˆë¬´ë¦¬ì¤‘..',
						start : '2025-04-07',
						end : '2025-04-11'
					},
					{
						title : 'âœ”ï¸ 1ì°¨ ë°œí‘œì¼',
						start : '2025-04-10',
					    backgroundColor: '#FF4C4C',	// ë°°ê²½ìƒ‰
					    borderColor: '#FF4C4C'      // í…Œë‘ë¦¬ìƒ‰
					},
					{
						title : 'ì°½ë¦½ê¸°ë…ì¼ 10ì£¼ë…„',
						start : '2025-04-15',
					    backgroundColor: '#FFA500',	// ë°°ê²½ìƒ‰
					    borderColor: '#FFA500'      // í…Œë‘ë¦¬ìƒ‰
					},
					{
						title : 'MES ì‹œì‘ ã…',
						start : '2025-04-11',
// 					    textColor: '#000000',       // ê¸€ììƒ‰
					    backgroundColor: '#B39DDB',	// ë°°ê²½ìƒ‰
					    borderColor: '#B39DDB'     	// í…Œë‘ë¦¬ìƒ‰
					},
					{
						title : 'Aê±°ë˜ì²˜ ë¯¸íŒ…',
						start : '2025-04-18T14:30:00',
						end : '2025-04-18T16:00:00',
					    backgroundColor: '#B39DDB',	// ë°°ê²½ìƒ‰
					    borderColor: '#B39DDB'     	// í…Œë‘ë¦¬ìƒ‰
					},
					{
						title : 'âœˆï¸ íœ´ê°€.. ê°€ê³ ì‹¶ë‹¤',
						start : '2025-04-30',
						end : '2025-05-03',
					    backgroundColor: '#2ECC71',	// ë°°ê²½ìƒ‰
					    borderColor: '#2ECC71'     	// í…Œë‘ë¦¬ìƒ‰
					},
					{
						title : 'ğŸ™Š ì–´ë¥¸ì´ë‚ ',
						start : '2025-05-05',
					    backgroundColor: '#FFA500',	// ë°°ê²½ìƒ‰
					    borderColor: '#FFA500'     	// í…Œë‘ë¦¬ìƒ‰
					},
					{
						title : 'ëŒ€ì²´ê³µíœ´ì¼ ~~',
						start : '2025-05-06',
					    backgroundColor: '#FFA500',	// ë°°ê²½ìƒ‰
					    borderColor: '#FFA500'     	// í…Œë‘ë¦¬ìƒ‰
					},
					{
						title : 'âœ”ï¸ 2ì°¨ ë°œí‘œì¼',
						start : '2025-05-07',
					    backgroundColor: '#FF4C4C',	// ë°°ê²½ìƒ‰
					    borderColor: '#FF4C4C'      // í…Œë‘ë¦¬ìƒ‰
					} 
					]
				});
				calendar.render();
				
				
				// -------------------------------------------------
				// ì¶œí‡´ê·¼ë²„íŠ¼
				// ì´ˆê¸° ë²„íŠ¼ ìƒíƒœ ì„¤ì •
			    const checkInBtn = $("#ì¶œê·¼");
			    const checkOutBtn = $("#í‡´ê·¼");
			    const outSideBtn = $("#ì™¸ê·¼");
			    const comeBackBtn = $("#ë³µê·€");
	
			    const modelCheckInTime = $('#modelCheckInTime').val();		// ì¶œê·¼ ì‹œê°„
			    const modelCheckOutTime = $('#modelCheckOutTime').val();	// í‡´ê·¼ ì‹œê°„
			    const modelLastStatus = $('#modelLastStatus').val();   		// ë§ˆì§€ë§‰ ê·¼ë¬´ ìƒíƒœ ì½”ë“œ
	
			    // ì´ˆê¸° ì‹œê°„ ì„¸íŒ…
			    if (modelCheckInTime) {	// ì¶œê·¼ì‹œê°„
			        $('#checkInTime').val(modelCheckInTime);
			    }
			    if (modelCheckOutTime) {	// í‡´ê·¼ì‹œê°„
			        $('#checkOutTime').val(modelCheckOutTime);
			    }
	
			    // workStatusCode(=minorCode)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ minorName ì°¾ê¸°
			    // => codeItemListë¥¼ JSON ë¬¸ìì—´ë¡œ ê°€ì ¸ì˜´
			    let lastStatusName = null;
			    if (modelLastStatus) {
			        const statusItem = codeItemList.find(item => item.minorCode == modelLastStatus);
			        if (statusItem) {
			            lastStatusName = statusItem.minorName;
			        }
			    }
			    console.log("lastStatusName:", lastStatusName);

			    
			    
			    // ---------------------------------------------------------------------------------
			    // ë²„íŠ¼ ì´ˆê¸° ìƒíƒœ ì„¤ì •
			    function initButtonState(statusName) {
			    	// ëª¨ë“  ë²„íŠ¼ ë¹„í™œì„±í™”
			        checkInBtn.prop("disabled", true);
			        checkOutBtn.prop("disabled", true);
			        outSideBtn.prop("disabled", true);
			        comeBackBtn.prop("disabled", true);
	
			     	// ì¶œê·¼ ì „
			        if (!statusName) {
			            checkInBtn.show().prop("disabled", false);
			            return;
			        }

		            const now = new Date();
		            const today = now.toISOString().slice(0, 10); // ì˜¤ëŠ˜ ë‚ ì§œ
		            
			        // ì¶œê·¼ì€ í–ˆê³  í‡´ê·¼ ì „ì´ë©´ (ìƒíƒœê°€ ì¶œê·¼/ì™¸ê·¼/ë³µê·€ ê´€ê³„ì—†ì´)
			        if (modelCheckInTime && !modelCheckOutTime) {
			            const checkIn = new Date(`${today}T${modelCheckInTime}`);
//	 		            const checkOutTime = new Date(checkIn.getTime() + 9 * 60 * 60 * 1000);	// 9ì‹œê°„
			            const checkOutTime = new Date(checkIn.getTime() + 30 * 1000);	// í…ŒìŠ¤íŠ¸ìš© (30ì´ˆ í›„ í‡´ê·¼ ê°€ëŠ¥)
		                const delay = checkOutTime - now;	// í‡´ê·¼ê¹Œì§€ ë‚¨ì€ì‹œê°„
						
                        checkOutBtn.show();	// í‡´ê·¼ ë²„íŠ¼
                        outSideBtn.show();	// ì™¸ê·¼ ë²„íŠ¼
                        comeBackBtn.show();	// ë³µê·€ ë²„íŠ¼

                        // í‡´ê·¼ ë²„íŠ¼ ì²˜ë¦¬
			            if (now >= checkOutTime) {	// í‡´ê·¼ì‹œê°„ì´ ë˜ì—ˆì„ ê²½ìš°
			                checkOutBtn.prop("disabled", false);
			            } else {	// ì•„ì§ í‡´ê·¼ì‹œê°„ ì•„ë‹ ê²½ìš°
			                setTimeout(() => checkOutBtn.prop("disabled", false), delay);
			            }
                        
			            console.log("ìƒíƒœëª…:", statusName);
                        
			            // ì™¸ê·¼ ë²„íŠ¼ ì²˜ë¦¬ (ì¶œê·¼/ì§€ê°/ë³µê·€ ìƒíƒœ, í‡´ê·¼ ì‹œê°„ ë„ë‹¬ ì „, í‡´ê·¼ ê¸°ë¡ ì—†ì–´ì•¼ í•¨)
//	 			        if ((statusName === 'ì¶œê·¼' || statusName === 'ì§€ê°' || statusName === 'ë³µê·€') && now < checkOutTime && !modelCheckOutTime) {
			            if (['ì¶œê·¼', 'ì§€ê°', 'ë³µê·€'].includes(statusName) && now < checkOutTime && !modelCheckOutTime) {
			                outSideBtn.prop("disabled", false);	// ì™¸ê·¼ O
			            }
			        }

			     	// ë³µê·€ ë²„íŠ¼ì€ ìƒíƒœê°€ ì™¸ê·¼ì¼ ë•Œë§Œ
			        if (statusName === 'ì™¸ê·¼') {
			            comeBackBtn.prop("disabled", false);	// ë³µê·€ O
			        }
			     	
		            // í‡´ê·¼ í›„: í‡´ê·¼ë²„íŠ¼ ì™¸ ì•„ë¬´ ë²„íŠ¼ë„ ì•ˆ ë³´ì´ê²Œ
			        if (modelCheckOutTime) {
			            checkInBtn.hide();
			            checkOutBtn.show();
			            outSideBtn.hide();
			            comeBackBtn.hide();
			        }
			    }
	
			    initButtonState(lastStatusName);
	
			    // ---------------------------------------------------------------------------------
			    // ì¶œí‡´ê·¼ì‹œê°„ í¬ë§· í•¨ìˆ˜(hh:mm:ss)
			    function formatTime(date) {
			        const hh = String(date.getHours()).padStart(2, '0');
			        const mm = String(date.getMinutes()).padStart(2, '0');
			        const ss = String(date.getSeconds()).padStart(2, '0');
			        return `${hh}:${mm}:${ss}`;
			    }
			    
			    // ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
			    $('.work-btn').on('click', function () {
			        const $btn = $(this);
			        let workStatusCode = $btn.data('code');	// minorCode
			        let workStatusName = $btn.data('name');	// minorName
	
			        const now = new Date();
			        if (workStatusName === 'ì¶œê·¼') {
			            $('#checkInTime').val(formatTime(now));		// hh:mm:ss
			        } else if (workStatusName === 'í‡´ê·¼') {
			            $('#checkOutTime').val(formatTime(now));	// hh:mm:ss
			        }
	
			        // ë²„íŠ¼ ìƒíƒœ ë³€ê²½
			        switch (workStatusName) {
			            case 'ì¶œê·¼':
			                checkInBtn.hide().prop("disabled", true);	// ì¶œê·¼ : ìˆ¨ê¸°ê³  ë¹„í™œì„±í™”
			                checkOutBtn.show();							// í‡´ê·¼ : ë³´ì´ê¸°(ë¹„í™œì„±í™”)
			                outSideBtn.show().prop("disabled", false);	// ì™¸ê·¼ : ë³´ì´ê³  í™œì„±í™”
			                comeBackBtn.show();							// ë³µê·€ : ë³´ì´ê¸°(ë¹„í™œì„±í™”)
			                
			             	// í…ŒìŠ¤íŠ¸ìš©: 30ì´ˆ ë’¤ í‡´ê·¼ ë²„íŠ¼ í™œì„±í™”
			                const futureTime = new Date(now.getTime() + 30 * 1000);	// 9ì‹œê°„ : 9 * 60 * 60 * 1000
			                const delay = futureTime.getTime() - now.getTime();

			                setTimeout(() => {
			                    checkOutBtn.prop("disabled", false);	// ì¶œê·¼ O
			                    outSideBtn.prop("disabled", true);		// ì™¸ê·¼ X
			                }, delay);
			                break;
	
			            case 'ì™¸ê·¼':
			                outSideBtn.prop("disabled", true);
			                comeBackBtn.prop("disabled", false);
			                break;
	
			            case 'ë³µê·€':
			                comeBackBtn.prop("disabled", true);
			             	
			                // ë³µê·€ ë¡œì§ - ì¶œê·¼ ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ í‡´ê·¼ ì‹œê°„ ë¹„êµ
			                const checkInTime = $('#checkInTime').val();
			                if (checkInTime) {
			                    const today = now.toISOString().slice(0, 10);  // YYYY-MM-DD
			                    const checkInDate = new Date(`${today}T${checkInTime}`); // ì¶œê·¼ ì‹œê°
			                    const futureTimeForComeback = new Date(checkInDate.getTime() + 30 * 1000); // ì¶œê·¼ 30ì´ˆ í›„ê°€ í‡´ê·¼ ì‹œê°„ ê¸°ì¤€
			                    const nowForComeback = new Date();

			                    if (nowForComeback < futureTimeForComeback) {   // í‡´ê·¼ì‹œê°„ ì „
			                        outSideBtn.prop("disabled", false); // ì™¸ê·¼ O
			                    } else {    // í‡´ê·¼ì‹œê°„ ì´í›„
			                        outSideBtn.prop("disabled", true);  // ì™¸ê·¼ X
			                    }
			                }
			                break;
	
			            case 'í‡´ê·¼':
			                checkOutBtn.prop("disabled", true);			// í‡´ê·¼ : ë¹„í™œì„±í™”
			                outSideBtn.hide().prop("disabled", true);	// ì™¸ê·¼ : ìˆ¨ê¸°ê³  ë¹„í™œì„±í™”
			                comeBackBtn.hide().prop("disabled", true);	// ë³µê·€ : ìˆ¨ê¸°ê³  ë¹„í™œì„±í™”
			                break;
			        }
	
			        // AJAX ì „ì†¡
			        $.ajax({
			            url: '/commute/save',
			            type: 'POST',
			            contentType: 'application/json',
			            data: JSON.stringify({
			                workStatusCode: workStatusCode
			            }),
			            success: function (response) {
			                alert('ì²˜ë¦¬ ì™„ë£Œ: ' + workStatusName);
			                console.log(response);
			            },
			            error: function (xhr, status, error) {
			                alert('ì „ì†¡ ì‹¤íŒ¨');
			                console.error(error);
			            }
			        });
			    });
			    // -----------------------------------------------------------
			});
		</script>	
	</th:block> <!-- </th:block layout:fragment="contents"> -->

	<th:block layout:fragment="script">
		<!-- codeItemListë¥¼ JSON ë¬¸ìì—´ë¡œ ë„˜ê¸°ê¸° -->
		<script th:inline="javascript">
			let codeItemList = /*[[${codeItemList}]]*/ null;
		</script>
	</th:block>
</body>
</html>